Скрипт работает как стандартные галереи:
сначала нужно загрузить файлы.
Можно было бы написать скрипт, который сканирует
папку gallery каждый раз когда запускается и генерирует
разные размеры изображений проверяя перед этим нет ли
уже в папке cache нужных изображений, но для этого
нужно было бы применить циклы и при большом количестве
изображений это скажется на скорости работы программы.

Поэтому я пошёл обычным путём - изображение загружается,
сразу при загрузке создаются миниатюры.
Обычно веб-приложения не подразумевают работу с файлами
напрямую через проводник или ftp, поэтому сделал так.
Если нужно, чтобы работало именно после того,
как закинул изображения в папку gallery, нужно будет
сделать скрипт сканирования и запускать его по крон
или вручную, чтобы скорость работы галереи не проседала 